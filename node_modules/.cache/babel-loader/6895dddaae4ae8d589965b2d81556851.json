{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter}from\"react-router-dom\";import Container from\"react-bootstrap/Container\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import Navigate from\"./Navigate\";import Col from\"react-bootstrap/Col\";import{Row}from'react-bootstrap';export var Rating=/*#__PURE__*/function(_Component){_inherits(Rating,_Component);var _super=_createSuper(Rating);function Rating(props){var _this;_classCallCheck(this,Rating);_this=_super.call(this,props);_this.state={email:null,ratings:[],musiclist:[]};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Rating,[{key:\"componentWillMount\",value:function componentWillMount(){if(localStorage.getItem(\"email\")){this.setState({email:localStorage.getItem(\"email\")},console.log(\"r:Get email from app component \"+localStorage.getItem(\"email\")));}else{this.props.history.push('/unauthorized');}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(\"get rating \"+this.state.email);var url='http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getUserRatings?email='+this.state.email;fetch(url,{method:'GET'}).then(function(response){if(response.ok){response.json().then(function(data){_this2.setState({ratings:data.map(function(item){return{song_name:item.song_name,song_artist:item.song_artist,rate:item.rate,comment:item.comment};})});});/*\r\n                let data=response.json();\r\n                if(data!==null){\r\n                  this.setState({\r\n                    ratings: data.map(item => ({\r\n                        song_name: item.song_name,\r\n                        song_artist: item.song_artist,\r\n                        rate:item.rate,\r\n                        comment:item.comment\r\n                    })\r\n                    )})\r\n                }\r\n                */}});//.then(data=>{\n//  }\n//  );\n}},{key:\"handleClick\",value:function handleClick(){var _this3=this;var url='http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getRecommendByUserName?email='+this.state.email;fetch(url,{method:'GET'}).then(function(response){return response.json();}).then(function(data){if(data!==null){console.log(\"test \"+data);_this3.setState({musiclist:data.map(function(item){return{song_name:item.song_name,song_artist:item.song_artist,strength:item.strength};})});}}).catch(function(e){return alert(\"No recommendation for you\");});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Navigate,null),/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"recommendation\"},/*#__PURE__*/React.createElement(Form.Label,{style:{fontSize:'27px',fontWeight:'bold'}},\"Recommend music based on other users' and your ratings\")),/*#__PURE__*/React.createElement(Button,{variant:\"dark\",onClick:this.handleClick},\"Get recommendation\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},this.state.musiclist.map(function(listValue,index){return/*#__PURE__*/React.createElement(Row,{key:index},/*#__PURE__*/React.createElement(Col,{key:index},\"Num \",index+1,\" suggested music: \"),/*#__PURE__*/React.createElement(Col,null,\"Song name : \",listValue.song_name),/*#__PURE__*/React.createElement(Col,null,\"Song artist : \",listValue.song_artist),/*#__PURE__*/React.createElement(Col,null,\"Recommended strength : \",listValue.strength),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));}))),/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),this.state.ratings.map(function(listValue,index){return/*#__PURE__*/React.createElement(Row,{key:index},/*#__PURE__*/React.createElement(Col,{style:{color:'red'}},\"Song name : \",listValue.song_name),/*#__PURE__*/React.createElement(Col,{style:{color:'red'}},\"Song artist : \",listValue.song_artist),/*#__PURE__*/React.createElement(Col,{style:{color:'blue'}},\"Your rating : \",listValue.rate),/*#__PURE__*/React.createElement(Col,{style:{color:'blue'}},\"Your comment : \",listValue.comment),/*#__PURE__*/React.createElement(\"br\",null));}))));}}]);return Rating;}(Component);export default withRouter(Rating);","map":{"version":3,"sources":["C:/Users/huang/Desktop/reactFrontend/src/components/Rating.js"],"names":["React","Component","withRouter","Container","Form","Button","Navigate","Col","Row","Rating","props","state","email","ratings","musiclist","handleClick","bind","localStorage","getItem","setState","console","log","history","push","url","fetch","method","then","response","ok","json","data","map","item","song_name","song_artist","rate","comment","strength","catch","e","alert","fontSize","fontWeight","listValue","index","color"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Navigate from \"./Navigate\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport { Row } from 'react-bootstrap';\r\n\r\nexport class Rating extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      email:null,\r\n      ratings:[],\r\n      musiclist:[]\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  componentWillMount() {\r\n    if(localStorage.getItem(\"email\")){\r\n      this.setState({email:localStorage.getItem(\"email\")},console.log(\"r:Get email from app component \"+localStorage.getItem(\"email\")));}\r\n    else{\r\n      this.props.history.push('/unauthorized');\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount(){\r\n      console.log(\"get rating \"+this.state.email);\r\n    const url = 'http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getUserRatings?email='+this.state.email;\r\n    fetch(url, { \r\n            method: 'GET'\r\n        })\r\n        .then(\r\n            (response)=>{ \r\n              if(response.ok){\r\n                response.json().then(data=>{\r\n                  this.setState({\r\n                    ratings: data.map(item => ({\r\n                        song_name: item.song_name,\r\n                        song_artist: item.song_artist,\r\n                        rate:item.rate,\r\n                        comment:item.comment\r\n                    })\r\n                    )})\r\n                })\r\n                /*\r\n                let data=response.json();\r\n                if(data!==null){\r\n                  this.setState({\r\n                    ratings: data.map(item => ({\r\n                        song_name: item.song_name,\r\n                        song_artist: item.song_artist,\r\n                        rate:item.rate,\r\n                        comment:item.comment\r\n                    })\r\n                    )})\r\n                }\r\n                */\r\n              }\r\n             }\r\n          );\r\n        //.then(data=>{\r\n        //  }\r\n        //  );\r\n  }\r\n\r\n  handleClick(){\r\n    const url = 'http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getRecommendByUserName?email='+this.state.email;\r\n    fetch(url, { \r\n            method: 'GET' \r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        )\r\n        .then(data=>{\r\n            if(data!==null){\r\n                console.log(\"test \"+data);\r\n                this.setState({\r\n                    musiclist: data.map(item => ({\r\n                        song_name: item.song_name,\r\n                        song_artist: item.song_artist,\r\n                        strength:item.strength\r\n                    })\r\n                    )})\r\n        }\r\n    }\r\n        )\r\n        .catch(e=>alert(\"No recommendation for you\"));\r\n  }\r\n  render() {\r\n    return (\r\n        <Container fluid>\r\n        <Navigate/>\r\n        <Container fluid=\"lg\">\r\n        <Container fluid=\"lg\">\r\n        <Col md={4}>\r\n        <Form>\r\n          <Row>\r\n          <Form.Group controlId=\"recommendation\">\r\n            <Form.Label style={{fontSize: '27px',fontWeight: 'bold'}}>Recommend music based on other users' and your ratings</Form.Label>\r\n          </Form.Group>\r\n          <Button variant=\"dark\" onClick={this.handleClick}>Get recommendation</Button>\r\n          </Row>\r\n        </Form>\r\n        </Col><br/><br/><br/>\r\n        <Container fluid=\"lg\">\r\n        {(this.state.musiclist.map(( listValue, index ) => {\r\n          return (\r\n            <Row key={index}>\r\n              <Col key={index} >Num {index+1} suggested music: </Col>\r\n              <Col >\r\n               Song name : {listValue.song_name}\r\n               </Col >\r\n               <Col >\r\n               Song artist : {listValue.song_artist}\r\n               </Col>\r\n               <Col >\r\n               Recommended strength : {listValue.strength}\r\n               </Col ><br/><br/>\r\n            </Row>\r\n          );\r\n        }))}\r\n        </Container>\r\n      </Container>\r\n          <Container fluid=\"lg\"><br/><br/>\r\n            {this.state.ratings.map(( listValue, index ) => {\r\n          return (\r\n            <Row key={index}>\r\n               <Col style={{ color: 'red' }}>\r\n               Song name : {listValue.song_name}\r\n               </Col >\r\n               <Col style={{ color: 'red' }}>\r\n               Song artist : {listValue.song_artist}\r\n               </Col>\r\n               <Col style={{ color: 'blue' }}>\r\n               Your rating : {listValue.rate}\r\n               </Col>\r\n               <Col style={{ color: 'blue' }}>\r\n               Your comment : {listValue.comment}\r\n               </Col><br/>\r\n            </Row>\r\n          );\r\n        })}\r\n          </Container>\r\n        </Container>\r\n        </Container>\r\n      );\r\n  }\r\n}\r\n\r\n  export default withRouter(Rating);"]},"metadata":{},"sourceType":"module"}