{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\huang\\\\Desktop\\\\reactFrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withRouter}from\"react-router-dom\";import Container from\"react-bootstrap/Container\";import Navigate from\"./Navigate\";import Billboard from\"./Billboard\";import _ from'lodash';import{Form,Col,Button}from'react-bootstrap';export var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.state={songList:[],error:\"no\",email:null,id:1,rating:1,comment:\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",song_name:\"\",song_artist:\"\"};_this.handleRating=_this.handleRating.bind(_assertThisInitialized(_this));_this.handleEdit=_this.handleEdit.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;if(localStorage.getItem(\"email\")){var e=localStorage.getItem(\"email\");this.setState({email:e},console.log(\"Home get email from app component \"+e));fetch('http://aa6ef030af3a246c3aa85b200471866b-231031702.us-east-1.elb.amazonaws.com:5080/billboard100',{method:'POST'}).then(function(response){return response.json();}).catch(function(error){_this2.setState({error:error});}).then(function(data){return _this2.setState({songList:data});});}else{this.props.history.push('/unauthorized');}/*\r\n       if(this.props === undefined || this.props === null){\r\n         this.props.history.push('/unauthorized');\r\n       }\r\n       else{\r\n         if(this.props.email === undefined || this.props.email === null){\r\n          this.props.history.push('/unauthorized');\r\n         }\r\n        this.setState({email:this.props.email},console.log(\"Get email from app component \"+this.props.email));\r\n        fetch('http://localhost:5080/billboard100', { \r\n            method: 'POST'\r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        )\r\n        .catch(error=>{this.setState({error:error})})\r\n        .then(data=>this.setState({songList:data}));\r\n       }\r\n       */}},{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"handleRating\",value:function handleRating(name,artist){var url='http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getRating2?email='+this.state.email+\"&song_name=\"+name+\"&song_artist=\"+artist;fetch(url,{method:'GET'}).then(function(response){return response.json();}).then(function(data){if(data===-1){alert(\" You haven't rated it \");}else{alert(\" Your rating is : \"+data);}});}},{key:\"handleEdit\",value:function handleEdit(){var _this3=this;this.state.songList.forEach(function(e){if(e[0]===_this3.state.id+\".\"){if(window.confirm('You choosed : '+e[1]+' written by '+e[2]+\" , click OK to confirm\")){var url='http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/newRating1?email='+_this3.state.email;fetch(url,{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:_this3.state.comment,rate:_this3.state.rating,song_name:e[1],song_artist:e[2]})}).then(function(response){return response.json();});}}});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Navigate,null),/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"idid\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Select music id to rate\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",required:true,onChange:function onChange(e){return _this4.setState({id:e.target.value});}},_.range(1,101).map(function(value){return/*#__PURE__*/React.createElement(\"option\",{key:value,value:value},value);})))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"rating\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Star\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",required:true,onChange:function onChange(e){return _this4.setState({rating:e.target.value});}},/*#__PURE__*/React.createElement(\"option\",null,\"1\"),/*#__PURE__*/React.createElement(\"option\",null,\"2\"),/*#__PURE__*/React.createElement(\"option\",null,\"3\"),/*#__PURE__*/React.createElement(\"option\",null,\"4\"),/*#__PURE__*/React.createElement(\"option\",null,\"5\"))))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"comment\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Comment\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",placeholder:\"Good music\",rows:\"2\",onChange:function onChange(e){return _this4.setState({comment:e.target.value});}})))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{md:5},/*#__PURE__*/React.createElement(Button,{variant:\"info\",onClick:this.handleEdit,style:{margin:'10px'}},\"Submit\"))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,{fluid:\"lg\"},/*#__PURE__*/React.createElement(Billboard,{handleRating:this.handleRating,songs:this.state.songList}))));}}]);return Home;}(Component);export default withRouter(Home);","map":{"version":3,"sources":["C:/Users/huang/Desktop/reactFrontend/src/components/Home.js"],"names":["React","Component","withRouter","Container","Navigate","Billboard","_","Form","Col","Button","Home","props","state","songList","error","email","id","rating","comment","song_name","song_artist","handleRating","bind","handleEdit","localStorage","getItem","e","setState","console","log","fetch","method","then","response","json","catch","data","history","push","name","artist","url","alert","forEach","window","confirm","headers","body","JSON","stringify","rate","target","value","range","map","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withRouter} from \"react-router-dom\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Navigate from \"./Navigate\";\r\nimport Billboard from \"./Billboard\";\r\nimport _ from 'lodash';\r\nimport { Form,Col,Button} from 'react-bootstrap';\r\nexport class Home extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      songList:[],\r\n      error:\"no\",\r\n      email:null,\r\n      id:1,\r\n      rating:1,\r\n      comment:\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n      song_name:\"\",\r\n      song_artist:\"\"\r\n    };\r\n    this.handleRating = this.handleRating.bind(this);\r\n    this.handleEdit = this.handleEdit.bind(this);\r\n  }\r\n  componentWillMount() {\r\n\r\n    if(localStorage.getItem(\"email\")){\r\n      let e=localStorage.getItem(\"email\");\r\n      this.setState({email:e},console.log(\"Home get email from app component \"+e));\r\n        fetch('http://aa6ef030af3a246c3aa85b200471866b-231031702.us-east-1.elb.amazonaws.com:5080/billboard100', { \r\n            method: 'POST'\r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        )\r\n        .catch(error=>{this.setState({error:error})})\r\n        .then(data=>this.setState({songList:data}));\r\n    }\r\n    else{\r\n      this.props.history.push('/unauthorized');\r\n    }\r\n    /*\r\n       if(this.props === undefined || this.props === null){\r\n         this.props.history.push('/unauthorized');\r\n       }\r\n       else{\r\n         if(this.props.email === undefined || this.props.email === null){\r\n          this.props.history.push('/unauthorized');\r\n         }\r\n        this.setState({email:this.props.email},console.log(\"Get email from app component \"+this.props.email));\r\n        fetch('http://localhost:5080/billboard100', { \r\n            method: 'POST'\r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        )\r\n        .catch(error=>{this.setState({error:error})})\r\n        .then(data=>this.setState({songList:data}));\r\n       }\r\n       */\r\n  }\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleRating(name,artist){\r\n    const url = 'http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/getRating2?email='+this.state.email+\"&song_name=\"+name+\"&song_artist=\"+artist;\r\n    fetch(url, { \r\n            method: 'GET' \r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        )\r\n        .then(data=>{\r\n          if(data===-1){\r\n            alert(\" You haven't rated it \");\r\n          }\r\n          else{\r\n            alert(\" Your rating is : \"+data);\r\n          }\r\n        }\r\n        );\r\n  }\r\n\r\n  handleEdit(){\r\n    this.state.songList.forEach((e)=>{\r\n      if(e[0]===this.state.id+\".\"){\r\n        if (window.confirm('You choosed : '+e[1]+' written by '+e[2]+\" , click OK to confirm\")){\r\n          const url='http://a25c5b9c5e07e482bb242ba13c3af0b5-12839088.us-east-1.elb.amazonaws.com:8080/newRating1?email='+this.state.email;\r\n    fetch(url, { \r\n            method: 'POST', headers: {\"Content-Type\": \"application/json\"}, body: JSON.stringify({comment:this.state.comment,\r\n            rate:this.state.rating,song_name:e[1],song_artist:e[2]}) \r\n        }) \r\n        .then(\r\n          (response)=>{ return response.json() }\r\n        );\r\n        }\r\n      }\r\n    }); \r\n  }\r\n  \r\n  render() {\r\n    \r\n        return (\r\n          <Container fluid>\r\n          <Navigate/>\r\n          <Container fluid=\"lg\">\r\n          <Container>\r\n            <Form>\r\n            <Form.Row>\r\n            <Col>\r\n            <Form.Group as={Col} controlId=\"idid\">\r\n            <Form.Label>Select music id to rate</Form.Label>\r\n            <Form.Control as=\"select\" required onChange={e=>this.setState({id:e.target.value})}>\r\n            { _.range(1, 101).map(value => <option key={value} value={value}>{value}</option>) }\r\n            </Form.Control>\r\n            </Form.Group>\r\n            </Col>\r\n            <Col>\r\n            <Form.Group as={Col} controlId=\"rating\">\r\n            <Form.Label>Star</Form.Label>\r\n            <Form.Control as=\"select\" required onChange={e=>this.setState({rating:e.target.value})}>\r\n            <option>1</option>\r\n            <option>2</option>\r\n            <option>3</option>\r\n            <option>4</option>\r\n            <option>5</option>\r\n            </Form.Control>\r\n            </Form.Group>\r\n            </Col>\r\n            </Form.Row>\r\n            <Form.Row>\r\n            <Col>\r\n            <Form.Group controlId=\"comment\">\r\n            <Form.Label>Comment</Form.Label>\r\n            <Form.Control as=\"textarea\"  placeholder=\"Good music\" rows=\"2\" onChange={e=>this.setState({comment:e.target.value})}/>\r\n            </Form.Group>\r\n            </Col>\r\n            </Form.Row>\r\n            <Form.Row>\r\n            <Col md={5}>\r\n            <Button variant=\"info\" onClick={this.handleEdit} style={{margin:'10px'}}>Submit</Button>\r\n            </Col>\r\n            </Form.Row>\r\n            </Form>\r\n            </Container><br/><br/>\r\n            <Container fluid=\"lg\">\r\n            <Billboard handleRating={this.handleRating}  songs={this.state.songList}/>\r\n            </Container>\r\n          </Container>\r\n          </Container>\r\n        );\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(Home);"]},"metadata":{},"sourceType":"module"}